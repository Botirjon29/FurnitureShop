@page "/profile"
<PageTitle>Profile</PageTitle>

@using FurnitureShop.Admin.Blazor.Dtos
@using Newtonsoft.Json

<h1>User-Name: @user?.UserName</h1>
<h1>Email: @user?.Email</h1>
<h1>First-Name: @user?.FirstName</h1>
<h1>Last-Name: @user?.LastName</h1>


@code {
    RegisterUserDto user = new RegisterUserDto();

    protected override async Task OnInitializedAsync()
    {
        var client = new HttpClient();
        client.BaseAddress = new Uri("https://localhost:7003");

        var message = new HttpRequestMessage(HttpMethod.Get, "/api/profile");
        message.SetBrowserRequestCredentials(BrowserRequestCredentials.Include);

        var profileJson = await (await client.SendAsync(message)).Content.ReadAsStringAsync();
        user = JsonConvert.DeserializeObject<RegisterUserDto>(profileJson);
    }
}